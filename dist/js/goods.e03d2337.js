(window.webpackJsonp = window.webpackJsonp || []).push([['goods'], { 1276: function (e, t, a) { 'use strict'; var r = a('d784'); var n = a('44e7'); var s = a('825a'); var o = a('1d80'); var i = a('4840'); var l = a('8aa5'); var c = a('50c4'); var u = a('14c3'); var d = a('9263'); var m = a('d039'); var p = [].push; var g = Math.min; var f = 4294967295; var b = !m(function () { return !RegExp(f, 'y') }); r('split', 2, function (e, t, a) { var r; return r = 'abbc'.split(/(b)*/)[1] == 'c' || 'test'.split(/(?:)/, -1).length != 4 || 'ab'.split(/(?:ab)*/).length != 2 || '.'.split(/(.?)(.?)/).length != 4 || '.'.split(/()()/).length > 1 || ''.split(/.?/).length ? function (e, a) { var r = String(o(this)); var s = void 0 === a ? f : a >>> 0; if (s === 0) return []; if (void 0 === e) return [r]; if (!n(e)) return t.call(r, e, s); var i; var l; var c; var u = []; var m = (e.ignoreCase ? 'i' : '') + (e.multiline ? 'm' : '') + (e.unicode ? 'u' : '') + (e.sticky ? 'y' : ''); var g = 0; var b = new RegExp(e.source, m + 'g'); while (i = d.call(b, r)) { if (l = b.lastIndex, l > g && (u.push(r.slice(g, i.index)), i.length > 1 && i.index < r.length && p.apply(u, i.slice(1)), c = i[0].length, g = l, u.length >= s)) break; b.lastIndex === i.index && b.lastIndex++ } return g === r.length ? !c && b.test('') || u.push('') : u.push(r.slice(g)), u.length > s ? u.slice(0, s) : u } : '0'.split(void 0, 0).length ? function (e, a) { return void 0 === e && a === 0 ? [] : t.call(this, e, a) } : t, [function (t, a) { var n = o(this); var s = void 0 == t ? void 0 : t[e]; return void 0 !== s ? s.call(t, n, a) : r.call(String(n), t, a) }, function (e, n) { var o = a(r, e, this, n, r !== t); if (o.done) return o.value; var d = s(e); var m = String(this); var p = i(d, RegExp); var h = d.unicode; var v = (d.ignoreCase ? 'i' : '') + (d.multiline ? 'm' : '') + (d.unicode ? 'u' : '') + (b ? 'y' : 'g'); var _ = new p(b ? d : '^(?:' + d.source + ')', v); var x = void 0 === n ? f : n >>> 0; if (x === 0) return []; if (m.length === 0) return u(_, m) === null ? [m] : []; var y = 0; var w = 0; var k = []; while (w < m.length) { _.lastIndex = b ? w : 0; var C; var I = u(_, b ? m : m.slice(w)); if (I === null || (C = g(c(_.lastIndex + (b ? 0 : w)), m.length)) === y)w = l(m, w, h); else { if (k.push(m.slice(y, w)), k.length === x) return k; for (var F = 1; F <= I.length - 1; F++) if (k.push(I[F]), k.length === x) return k; w = y = C } } return k.push(m.slice(y)), k }] }, !b) }, 1296: function (e, t, a) { 'use strict'; a('1e0c') }, '14c3': function (e, t, a) { var r = a('c6b6'); var n = a('9263'); e.exports = function (e, t) { var a = e.exec; if (typeof a === 'function') { var s = a.call(e, t); if (typeof s !== 'object') throw TypeError('RegExp exec method returned something other than an Object or null'); return s } if (r(e) !== 'RegExp') throw TypeError('RegExp#exec called on incompatible receiver'); return n.call(e, t) } }, '1e0c': function (e, t, a) {}, '2ab5': function (e, t, a) { 'use strict'; a('40e3') }, '3b0d': function (e, t, a) { 'use strict'; a.r(t); var r = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('el-breadcrumb', { attrs: { separator: '/' } }, [a('el-breadcrumb-item', { attrs: { to: { path: '/home' } } }, [e._v('首页')]), a('el-breadcrumb-item', [e._v('商品管理')]), a('el-breadcrumb-item', [e._v('分类参数')])], 1), a('el-card', [a('el-alert', { attrs: { title: '注意：只允许为第三级分类设置相关参数！', closable: !1, 'show-icon': '', type: 'warning' } }), a('el-row', { staticClass: 'car_opt' }, [a('el-col', [a('span', [e._v('选择商品分类：')]), a('el-cascader', { attrs: { clearable: '', options: e.catesList, props: e.catesProps }, on: { change: e.keysSelected }, model: { value: e.selectedCateKeys, callback: function (t) { e.selectedCateKeys = t }, expression: 'selectedCateKeys' } })], 1)], 1), a('el-tabs', { on: { 'tab-click': e.handleTabsClick }, model: { value: e.activeTabName, callback: function (t) { e.activeTabName = t }, expression: 'activeTabName' } }, [a('el-tab-pane', { attrs: { label: '动态参数', name: 'many' } }, [a('el-button', { attrs: { type: 'primary', size: 'mini', disabled: e.isBtnDisabled }, on: { click: e.showAddParamOrAttrDialog } }, [e._v('添加动态参数')]), a('el-table', { attrs: { data: e.manyTableData, border: '', stripe: '' } }, [a('el-table-column', { attrs: { type: 'expand' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [e._l(t.row.attr_vals, function (r, n) { return a('el-tag', { key: n, attrs: { closable: '' }, on: { close: function (a) { return e.handleTagsClose(n, t.row) } } }, [e._v(e._s(r))]) }), t.row.inputVisible ? a('el-input', { ref: 'saveTagInput', staticClass: 'input-new-tag', attrs: { size: 'small' }, on: { blur: function (a) { return e.handleInputConfirm(t.row) } }, nativeOn: { keyup: function (a) { return !a.type.indexOf('key') && e._k(a.keyCode, 'enter', 13, a.key, 'Enter') ? null : e.handleInputConfirm(t.row) } }, model: { value: t.row.inputValue, callback: function (a) { e.$set(t.row, 'inputValue', a) }, expression: 'scope.row.inputValue' } }) : a('el-button', { staticClass: 'button-new-tag', attrs: { size: 'small', type: 'success', plain: '' }, on: { click: function (a) { return e.showInput(t.row) } } }, [e._v('+ 添加')])] } }]) }), a('el-table-column', { attrs: { type: 'index' } }), a('el-table-column', { attrs: { label: '参数名称', prop: 'attr_name' } }), a('el-table-column', { attrs: { label: '操作' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [a('el-button', { attrs: { size: 'mini', type: 'primary', icon: 'el-icon-edit' }, on: { click: function (a) { return e.showEditParamOrAttrDialog(t.row.attr_id) } } }, [e._v('编辑')]), a('el-button', { attrs: { size: 'mini', type: 'danger', icon: 'el-icon-delete' }, on: { click: function (a) { return e.removeParamOrAttr(t.row.attr_id) } } }, [e._v('删除')])] } }]) })], 1)], 1), a('el-tab-pane', { attrs: { label: '静态属性', name: 'only' } }, [a('el-button', { attrs: { type: 'primary', size: 'mini', disabled: e.isBtnDisabled }, on: { click: e.showAddParamOrAttrDialog } }, [e._v('添加静态属性')]), a('el-table', { attrs: { data: e.onlyTableData, border: '', stripe: '' } }, [a('el-table-column', { attrs: { type: 'expand' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [e._l(t.row.attr_vals, function (r, n) { return a('el-tag', { key: n, attrs: { closable: '' }, on: { close: function (a) { return e.handleTagsClose(n, t.row) } } }, [e._v(e._s(r))]) }), t.row.inputVisible ? a('el-input', { ref: 'saveTagInput', staticClass: 'input-new-tag', attrs: { size: 'small' }, on: { blur: function (a) { return e.handleInputConfirm(t.row) } }, nativeOn: { keyup: function (a) { return !a.type.indexOf('key') && e._k(a.keyCode, 'enter', 13, a.key, 'Enter') ? null : e.handleInputConfirm(t.row) } }, model: { value: t.row.inputValue, callback: function (a) { e.$set(t.row, 'inputValue', a) }, expression: 'scope.row.inputValue' } }) : a('el-button', { staticClass: 'button-new-tag', attrs: { size: 'small', type: 'success', plain: '' }, on: { click: function (a) { return e.showInput(t.row) } } }, [e._v('+ 添加')])] } }]) }), a('el-table-column', { attrs: { type: 'index' } }), a('el-table-column', { attrs: { label: '属性名称', prop: 'attr_name' } }), a('el-table-column', { attrs: { label: '操作' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [a('el-button', { attrs: { size: 'mini', type: 'primary', icon: 'el-icon-edit' }, on: { click: function (a) { return e.showEditParamOrAttrDialog(t.row.attr_id) } } }, [e._v('编辑')]), a('el-button', { attrs: { size: 'mini', type: 'danger', icon: 'el-icon-delete' }, on: { click: function (a) { return e.removeParamOrAttr(t.row.attr_id) } } }, [e._v('删除')])] } }]) })], 1)], 1)], 1)], 1), a('el-dialog', { attrs: { title: '添加' + e.titleText, visible: e.addParamOrAttrDialogVisible, width: '40%' }, on: { 'update:visible': function (t) { e.addParamOrAttrDialogVisible = t }, close: e.addParamOrAttrDialogClose } }, [a('span', [a('el-form', { ref: 'addParamOrAttrFormRef', attrs: { model: e.addParamOrAttrForm, rules: e.addParamOrAttrFormRules, 'label-width': '110px' } }, [a('el-form-item', { attrs: { label: e.titleText + '名：', prop: 'attr_name' } }, [a('el-input', { model: { value: e.addParamOrAttrForm.attr_name, callback: function (t) { e.$set(e.addParamOrAttrForm, 'attr_name', t) }, expression: 'addParamOrAttrForm.attr_name' } })], 1)], 1)], 1), a('span', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [a('el-button', { on: { click: function (t) { e.addParamOrAttrDialogVisible = !1 } } }, [e._v('取 消')]), a('el-button', { attrs: { type: 'primary' }, on: { click: e.submitAddParamOrAttr } }, [e._v('确 定')])], 1)]), a('el-dialog', { attrs: { title: '编辑' + e.titleText, visible: e.editParamOrAttrDialogVisible, width: '40%' }, on: { 'update:visible': function (t) { e.editParamOrAttrDialogVisible = t }, close: e.editParamOrAttrDialogClose } }, [a('span', [a('el-form', { ref: 'editParamOrAttrFormRef', attrs: { model: e.editParamOrAttrForm, rules: e.editParamOrAttrFormRules, 'label-width': '110px' } }, [a('el-form-item', { attrs: { label: e.titleText + '名：', prop: 'attr_name' } }, [a('el-input', { model: { value: e.editParamOrAttrForm.attr_name, callback: function (t) { e.$set(e.editParamOrAttrForm, 'attr_name', t) }, expression: 'editParamOrAttrForm.attr_name' } })], 1)], 1)], 1), a('span', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [a('el-button', { on: { click: function (t) { e.editParamOrAttrDialogVisible = !1 } } }, [e._v('取 消')]), a('el-button', { attrs: { type: 'primary' }, on: { click: e.submitEditParamOrAttr } }, [e._v('确 定')])], 1)])], 1) }; var n = []; var s = (a('99af'), a('4160'), a('a15b'), a('a434'), a('ac1f'), a('1276'), a('498a'), a('159b'), a('96cf'), a('1da1')); var o = { data: function () { return { catesList: [], catesProps: { expandTrigger: 'hover', value: 'cat_id', label: 'cat_name', children: 'children' }, selectedCateKeys: [], activeTabName: 'many', manyTableData: [], onlyTableData: [], addParamOrAttrDialogVisible: !1, addParamOrAttrForm: { attr_name: '' }, addParamOrAttrFormRules: { attr_name: [{ required: !0, message: '请输入参数或属性名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] }, editParamOrAttrDialogVisible: !1, editParamOrAttrForm: { attr_name: '' }, editParamOrAttrFormRules: { attr_name: [{ required: !0, message: '请输入参数或属性名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] } } }, created: function () { this.getCatesList() }, methods: { getCatesList: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http.get('categories'); case 2:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 6; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 6:e.catesList = r.data; case 7:case 'end':return t.stop() } }, t) }))() }, keysSelected: function () { this.getParamsOrAttrsData() }, handleTabsClick: function (e, t) { this.getParamsOrAttrsData() }, getParamsOrAttrsData: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (e.selectedCateKeys.length === 3) { t.next = 5; break } return e.selectedCateKeys = [], e.manyTableData = [], e.onlyTableData = [], t.abrupt('return'); case 5:return t.next = 7, e.$http.get('categories/'.concat(e.cateId, '/attributes'), { params: { sel: e.activeTabName } }); case 7:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 11; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 11:r.data.forEach(function (e) { e.attr_vals = e.attr_vals ? e.attr_vals.split(' ') : [], e.inputVisible = !1, e.inputValue = '' }), e.activeTabName === 'many' ? e.manyTableData = r.data : e.onlyTableData = r.data; case 13:case 'end':return t.stop() } }, t) }))() }, showAddParamOrAttrDialog: function () { this.addParamOrAttrDialogVisible = !0 }, submitAddParamOrAttr: function () { var e = this; this.$refs.addParamOrAttrFormRef.validate(function () { var t = Object(s.a)(regeneratorRuntime.mark(function t (a) { var r, n; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (a) { t.next = 2; break } return t.abrupt('return', e.$message.warning('规则校验失败')); case 2:return t.next = 4, e.$http.post('categories/'.concat(e.cateId, '/attributes'), { attr_name: e.addParamOrAttrForm.attr_name, attr_sel: e.activeTabName }); case 4:if (r = t.sent, n = r.data, n.meta.status === 201) { t.next = 8; break } return t.abrupt('return', e.$message.error(n.meta.msg)); case 8:e.$message.success(n.meta.msg), e.getParamsOrAttrsData(), e.addParamOrAttrDialogVisible = !1; case 11:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) }, addParamOrAttrDialogClose: function () { this.$refs.addParamOrAttrFormRef.resetFields() }, showEditParamOrAttrDialog: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$http.get('categories/'.concat(t.cateId, '/attributes/').concat(e), { params: { attr_sel: t.activeTabName } }); case 2:if (r = a.sent, n = r.data, n.meta.status === 200) { a.next = 6; break } return a.abrupt('return', t.$message.error(n.meta.msg)); case 6:t.editParamOrAttrForm = n.data, t.editParamOrAttrDialogVisible = !0; case 8:case 'end':return a.stop() } }, a) }))() }, submitEditParamOrAttr: function () { var e = this; this.$refs.editParamOrAttrFormRef.validate(function () { var t = Object(s.a)(regeneratorRuntime.mark(function t (a) { var r, n; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (a) { t.next = 2; break } return t.abrupt('return', e.$message.warning('规则校验失败')); case 2:return t.next = 4, e.$http.put('categories/'.concat(e.cateId, '/attributes/').concat(e.editParamOrAttrForm.attr_id), { attr_name: e.editParamOrAttrForm.attr_name, attr_sel: e.activeTabName }); case 4:if (r = t.sent, n = r.data, n.meta.status === 200) { t.next = 8; break } return t.abrupt('return', e.$message.error(n.meta.msg)); case 8:e.$message.success(n.meta.msg), e.getParamsOrAttrsData(), e.editParamOrAttrDialogVisible = !1; case 11:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) }, editParamOrAttrDialogClose: function () { this.$refs.editParamOrAttrFormRef.resetFields() }, removeParamOrAttr: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n, s; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$confirm('此操作将永久删除该参数, 是否继续?', '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning' }).catch(function (e) { return e }); case 2:if (r = a.sent, r === 'confirm') { a.next = 5; break } return a.abrupt('return', t.$message.info('已取消删除！')); case 5:return a.next = 7, t.$http.delete('categories/'.concat(t.cateId, '/attributes/').concat(e)); case 7:if (n = a.sent, s = n.data, s.meta.status === 200) { a.next = 11; break } return a.abrupt('return', t.$message.error(s.meta.msg)); case 11:t.$message.success(s.meta.msg), t.getParamsOrAttrsData(); case 13:case 'end':return a.stop() } }, a) }))() }, handleInputConfirm: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:if (e.inputValue.trim().length !== 0) { a.next = 4; break } return e.inputValue = '', e.inputVisible = !1, a.abrupt('return'); case 4:e.attr_vals.push(e.inputValue.trim()), e.inputValue = '', t.saveAttrVals(e), e.inputVisible = !1; case 8:case 'end':return a.stop() } }, a) }))() }, showInput: function (e) { var t = this; e.inputVisible = !0, this.$nextTick(function (e) { t.$refs.saveTagInput.$refs.input.focus() }) }, handleTagsClose: function (e, t) { t.attr_vals.splice(e, 1), this.saveAttrVals(t) }, saveAttrVals: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$http.put('categories/'.concat(t.cateId, '/attributes/').concat(e.attr_id), { attr_name: e.attr_name, attr_sel: e.attr_sel, attr_vals: e.attr_vals.join(' ') }); case 2:if (r = a.sent, n = r.data, n.meta.status === 200) { a.next = 6; break } return a.abrupt('return', t.$message.error(n.meta.msg)); case 6:t.$message.success(n.meta.msg); case 7:case 'end':return a.stop() } }, a) }))() } }, computed: { isBtnDisabled: function () { return this.selectedCateKeys.length !== 3 }, cateId: function () { return this.selectedCateKeys.length === 3 ? this.selectedCateKeys[2] : null }, titleText: function () { return this.activeTabName === 'many' ? '动态参数' : '静态属性' } } }; var i = o; var l = (a('90e3a'), a('2877')); var c = Object(l.a)(i, r, n, !1, null, '36017aa8', null); t.default = c.exports }, '40e3': function (e, t, a) {}, '44e7': function (e, t, a) { var r = a('861d'); var n = a('c6b6'); var s = a('b622'); var o = s('match'); e.exports = function (e) { var t; return r(e) && (void 0 !== (t = e[o]) ? !!t : n(e) == 'RegExp') } }, '498a': function (e, t, a) { 'use strict'; var r = a('23e7'); var n = a('58a8').trim; var s = a('c8d2'); r({ target: 'String', proto: !0, forced: s('trim') }, { trim: function () { return n(this) } }) }, 5899: function (e, t) { e.exports = '\t\n\v\f\r                　\u2028\u2029\ufeff' }, '58a8': function (e, t, a) { var r = a('1d80'); var n = a('5899'); var s = '[' + n + ']'; var o = RegExp('^' + s + s + '*'); var i = RegExp(s + s + '*$'); var l = function (e) { return function (t) { var a = String(r(t)); return 1 & e && (a = a.replace(o, '')), 2 & e && (a = a.replace(i, '')), a } }; e.exports = { start: l(1), end: l(2), trim: l(3) } }, '8aa5': function (e, t, a) { 'use strict'; var r = a('6547').charAt; e.exports = function (e, t, a) { return t + (a ? r(e, t).length : 1) } }, '90e3a': function (e, t, a) { 'use strict'; a('9df9') }, 9263: function (e, t, a) { 'use strict'; var r = a('ad6d'); var n = a('9f7f'); var s = RegExp.prototype.exec; var o = String.prototype.replace; var i = s; var l = (function () { var e = /a/; var t = /b*/g; return s.call(e, 'a'), s.call(t, 'a'), e.lastIndex !== 0 || t.lastIndex !== 0 }()); var c = n.UNSUPPORTED_Y || n.BROKEN_CARET; var u = void 0 !== /()??/.exec('')[1]; var d = l || u || c; d && (i = function (e) { var t; var a; var n; var i; var d = this; var m = c && d.sticky; var p = r.call(d); var g = d.source; var f = 0; var b = e; return m && (p = p.replace('y', ''), p.indexOf('g') === -1 && (p += 'g'), b = String(e).slice(d.lastIndex), d.lastIndex > 0 && (!d.multiline || d.multiline && e[d.lastIndex - 1] !== '\n') && (g = '(?: ' + g + ')', b = ' ' + b, f++), a = new RegExp('^(?:' + g + ')', p)), u && (a = new RegExp('^' + g + '$(?!\\s)', p)), l && (t = d.lastIndex), n = s.call(m ? a : d, b), m ? n ? (n.input = n.input.slice(f), n[0] = n[0].slice(f), n.index = d.lastIndex, d.lastIndex += n[0].length) : d.lastIndex = 0 : l && n && (d.lastIndex = d.global ? n.index + n[0].length : t), u && n && n.length > 1 && o.call(n[0], a, function () { for (i = 1; i < arguments.length - 2; i++) void 0 === arguments[i] && (n[i] = void 0) }), n }), e.exports = i }, '984e': function (e, t, a) { 'use strict'; a.r(t); var r = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('el-breadcrumb', { attrs: { separator: '/' } }, [a('el-breadcrumb-item', { attrs: { to: { path: '/home' } } }, [e._v('首页')]), a('el-breadcrumb-item', [e._v('商品管理')]), a('el-breadcrumb-item', [e._v('商品列表')])], 1), a('el-card', [a('el-row', { attrs: { gutter: 20 } }, [a('el-col', { attrs: { span: 8 } }, [a('el-input', { attrs: { placeholder: '请输入关键字查询', clearable: '' }, on: { clear: e.getGoodsList }, nativeOn: { keyup: function (t) { return !t.type.indexOf('key') && e._k(t.keyCode, 'enter', 13, t.key, 'Enter') ? null : e.handleInputConfirm() } }, model: { value: e.queryInfo.query, callback: function (t) { e.$set(e.queryInfo, 'query', t) }, expression: 'queryInfo.query' } }, [a('el-button', { attrs: { slot: 'append', icon: 'el-icon-search' }, on: { click: e.getGoodsList }, slot: 'append' })], 1)], 1), a('el-col', { attrs: { span: 4 } }, [a('el-button', { attrs: { type: 'primary' }, on: { click: function (t) { return e.addGoodsPage() } } }, [e._v('添加商品')])], 1)], 1), a('el-table', { attrs: { data: e.goodsList, border: '', stripe: '' } }, [a('el-table-column', { attrs: { type: 'index' } }), a('el-table-column', { attrs: { label: '商品名称', prop: 'goods_name', 'min-width': '300px' } }), a('el-table-column', { attrs: { label: '商品价格(￥)', prop: 'goods_price', width: '100px' } }), a('el-table-column', { attrs: { label: '商品数量', width: '100px', prop: 'goods_number' } }), a('el-table-column', { attrs: { label: '商品入库时间', prop: 'add_time' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [e._v(' ' + e._s(e._f('dateFormat')(t.row.add_time)) + ' ')] } }]) }), a('el-table-column', { attrs: { label: '操作', width: '175px' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [a('el-button', { attrs: { type: 'primary', icon: 'el-icon-edit', size: 'mini' }, on: { click: function (a) { return e.showEditGoodsInfoDialog(t.row.goods_id) } } }), a('el-button', { attrs: { type: 'danger', icon: 'el-icon-delete', size: 'mini' }, on: { click: function (a) { return e.removeGoodsById(t.row.goods_id) } } })] } }]) })], 1), a('el-pagination', { attrs: { 'current-page': e.queryInfo.pagenum, 'page-sizes': [5, 10, 20, 50], 'page-size': e.queryInfo.pagesize, layout: 'total, sizes, prev, pager, next, jumper', total: e.total }, on: { 'size-change': e.handleSizeChange, 'current-change': e.handleCurrentChange } })], 1), a('el-dialog', { attrs: { title: '修改商品', visible: e.editGoodsInfoDialogVisible, width: '40%' }, on: { 'update:visible': function (t) { e.editGoodsInfoDialogVisible = t }, close: e.editGoodsInfoDialogClose } }, [a('span', [a('el-form', { ref: 'editGoodsInfoFormRef', attrs: { model: e.editGoodsInfoForm, rules: e.editGoodsInfoFormRules, 'label-width': '95px' } }, [a('el-form-item', { attrs: { label: '商品名称：', prop: 'goods_name' } }, [a('el-input', { model: { value: e.editGoodsInfoForm.goods_name, callback: function (t) { e.$set(e.editGoodsInfoForm, 'goods_name', t) }, expression: 'editGoodsInfoForm.goods_name' } })], 1)], 1)], 1), a('span', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [a('el-button', { on: { click: function (t) { e.editGoodsInfoDialogVisible = !1 } } }, [e._v('取 消')]), a('el-button', { attrs: { type: 'primary' }, on: { click: e.submitEditGoodsInfo } }, [e._v('确 定')])], 1)])], 1) }; var n = []; var s = (a('498a'), a('96cf'), a('1da1')); var o = { data: function () { return { queryInfo: { query: '', pagenum: 1, pagesize: 5 }, goodsList: [], total: 0, addGoodsForm: { goods_name: '' }, addGoodsFormRules: { goods_name: [{ required: !0, message: '请输入商品名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] }, editGoodsInfoDialogVisible: !1, editGoodsInfoForm: {}, editGoodsInfoFormRules: { goods_name: [{ required: !0, message: '请输入商品名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] } } }, created: function () { this.getGoodsList() }, methods: { getGoodsList: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return e.queryInfo.query = e.queryInfo.query.trim(), t.next = 3, e.$http.get('goods', { params: e.queryInfo }); case 3:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 7; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 7:r.data.goods.length === 0 && r.data.total !== 0 && (e.queryInfo.query.length !== 0 ? (e.queryInfo.pagenum = 1, e.getGoodsList()) : (e.queryInfo.pagenum = r.data.pagenum - 1, e.queryInfo.pagenum === 0 && (e.queryInfo.pagenum = 1), e.getGoodsList())), e.goodsList = r.data.goods, e.total = r.data.total; case 10:case 'end':return t.stop() } }, t) }))() }, handleSizeChange: function (e) { this.queryInfo.pagesize = e, this.getGoodsList() }, handleCurrentChange: function (e) { this.queryInfo.pagenum = e, this.getGoodsList() }, handleInputConfirm: function () { this.getGoodsList() }, addGoodsPage: function () { this.$router.push('/goods/add') }, showEditGoodsInfoDialog: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$http.get('goods/' + e); case 2:if (r = a.sent, n = r.data, n.meta.status === 200) { a.next = 6; break } return a.abrupt('return', t.$message.error(n.meta.msg)); case 6:t.editGoodsInfoForm = n.data, t.editGoodsInfoDialogVisible = !0; case 8:case 'end':return a.stop() } }, a) }))() }, submitEditGoodsInfo: function () { var e = this; this.$refs.editGoodsInfoFormRef.validate(function (t) { if (!t) return e.$message.warning('规则校验失败') }) }, editGoodsInfoDialogClose: function () { this.$refs.editGoodsInfoFormRef.resetFields() }, removeGoodsById: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n, s; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$confirm('此操作将永久删除该商品, 是否继续?', '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning' }).catch(function (e) { return e }); case 2:if (r = a.sent, r === 'confirm') { a.next = 5; break } return a.abrupt('return', t.$message.info('已取消删除！')); case 5:return a.next = 7, t.$http.delete('goods/' + e); case 7:if (n = a.sent, s = n.data, s.meta.status === 200) { a.next = 11; break } return a.abrupt('return', t.$message.error(s.meta.msg)); case 11:t.$message.success(s.meta.msg), t.getGoodsList(); case 13:case 'end':return a.stop() } }, a) }))() } } }; var i = o; var l = a('2877'); var c = Object(l.a)(i, r, n, !1, null, '98133898', null); t.default = c.exports }, '99ed': function (e, t, a) { 'use strict'; a.r(t); var r = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('el-breadcrumb', { attrs: { separator: '/' } }, [a('el-breadcrumb-item', { attrs: { to: { path: '/home' } } }, [e._v('首页')]), a('el-breadcrumb-item', [e._v('商品管理')]), a('el-breadcrumb-item', [e._v('商品分类')])], 1), a('el-card', [a('el-row', [a('el-col', [a('el-button', { attrs: { type: 'primary' }, on: { click: function (t) { return e.showAddCateDialog() } } }, [e._v('添加分类')])], 1)], 1), a('tree-table', { staticClass: 'treeTable', attrs: { data: e.catesList, columns: e.columns, 'selection-type': !1, 'expand-type': !1, 'show-index': '', 'index-text': '', border: '', 'show-row-hover': !0 }, scopedSlots: e._u([{ key: 'isOk', fn: function (e) { return [!1 === e.row.cat_deleted ? a('i', { staticClass: 'el-icon-success', staticStyle: { color: '#21b10d' } }) : a('i', { staticClass: 'el-icon-error', staticStyle: { color: 'red' } })] } }, { key: 'order', fn: function (t) { return [t.row.cat_level === 0 ? a('el-tag', { attrs: { type: '', size: 'mini' } }, [e._v('一级分类')]) : e._e(), t.row.cat_level === 1 ? a('el-tag', { attrs: { type: 'success', size: 'mini' } }, [e._v('二级分类')]) : e._e(), t.row.cat_level === 2 ? a('el-tag', { attrs: { type: 'warning', size: 'mini' } }, [e._v('三级分类')]) : e._e()] } }, { key: 'opt', fn: function (t) { return [a('el-button', { attrs: { type: 'primary', icon: 'el-icon-edit', size: 'mini' }, on: { click: function (a) { return e.showEditCateInfoDialog(t.row.cat_id) } } }, [e._v('编辑')]), a('el-button', { attrs: { type: 'danger', icon: 'el-icon-delete', size: 'mini' }, on: { click: function (a) { return e.removeCateById(t.row.cat_id) } } }, [e._v('删除')])] } }]) }), a('el-pagination', { attrs: { 'current-page': e.queryInfo.pagenum, 'page-sizes': [1, 2, 5, 10], 'page-size': e.queryInfo.pagesize, layout: 'total, sizes, prev, pager, next, jumper', total: e.total }, on: { 'size-change': e.handleSizeChange, 'current-change': e.handleCurrentChange } })], 1), a('el-dialog', { attrs: { title: '添加分类', visible: e.addCateDialogVisible, width: '40%' }, on: { 'update:visible': function (t) { e.addCateDialogVisible = t }, close: e.addCateDialogClose } }, [a('span', [a('el-form', { ref: 'addCateFormRef', attrs: { model: e.addCateForm, rules: e.addCateFormRules, 'label-width': '95px' } }, [a('el-form-item', { attrs: { label: '分类名称：', prop: 'cat_name' } }, [a('el-input', { model: { value: e.addCateForm.cat_name, callback: function (t) { e.$set(e.addCateForm, 'cat_name', t) }, expression: 'addCateForm.cat_name' } })], 1), a('el-form-item', { attrs: { label: '父级分类：' } }, [a('el-cascader', { attrs: { clearable: '', options: e.parentCatesList, props: e.cascaderProps }, on: { change: e.parentKeysSelected }, model: { value: e.selectedKeys, callback: function (t) { e.selectedKeys = t }, expression: 'selectedKeys' } })], 1)], 1)], 1), a('span', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [a('el-button', { on: { click: function (t) { e.addCateDialogVisible = !1 } } }, [e._v('取 消')]), a('el-button', { attrs: { type: 'primary' }, on: { click: e.submitaddCate } }, [e._v('确 定')])], 1)]), a('el-dialog', { attrs: { title: '修改分类', visible: e.editCateInfoDialogVisible, width: '40%' }, on: { 'update:visible': function (t) { e.editCateInfoDialogVisible = t }, close: e.editCateInfoDialogClose } }, [a('span', [a('el-form', { ref: 'editCateInfoFormRef', attrs: { model: e.editCateInfoForm, rules: e.editCateInfoFormRules, 'label-width': '95px' } }, [a('el-form-item', { attrs: { label: '分类名称：', prop: 'cat_name' } }, [a('el-input', { model: { value: e.editCateInfoForm.cat_name, callback: function (t) { e.$set(e.editCateInfoForm, 'cat_name', t) }, expression: 'editCateInfoForm.cat_name' } })], 1)], 1)], 1), a('span', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [a('el-button', { on: { click: function (t) { e.editCateInfoDialogVisible = !1 } } }, [e._v('取 消')]), a('el-button', { attrs: { type: 'primary' }, on: { click: e.submitEditCateInfo } }, [e._v('确 定')])], 1)])], 1) }; var n = []; var s = (a('96cf'), a('1da1')); var o = { data: function () { return { queryInfo: { type: 3, pagenum: 1, pagesize: 5 }, catesList: [], total: 0, columns: [{ label: '分类名称', prop: 'cat_name' }, { label: '是否有效', type: 'template', template: 'isOk' }, { label: '排序', type: 'template', template: 'order' }, { label: '操作', type: 'template', template: 'opt' }], addCateDialogVisible: !1, addCateForm: { cat_pid: 0, cat_name: '', cat_level: 0 }, addCateFormRules: { cat_name: [{ required: !0, message: '请输入分类名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] }, parentCatesList: [], cascaderProps: { expandTrigger: 'hover', checkStrictly: !0, value: 'cat_id', label: 'cat_name', children: 'children' }, selectedKeys: [], cascaderStyles: { display: 'block' }, editCateInfoDialogVisible: !1, editCateInfoForm: {}, editCateInfoFormRules: { cat_name: [{ required: !0, message: '请输入分类名！', trigger: 'blur' }, { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }] } } }, created: function () { this.getCatesList() }, methods: { getCatesList: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http.get('categories', { params: e.queryInfo }); case 2:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 6; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 6:r.data.result.length === 0 && r.data.total !== 0 && (e.queryInfo.pagenum = r.data.pagenum, e.getCatesList()), e.catesList = r.data.result, e.total = r.data.total; case 9:case 'end':return t.stop() } }, t) }))() }, handleSizeChange: function (e) { this.queryInfo.pagesize = e, this.getCatesList() }, handleCurrentChange: function (e) { this.queryInfo.pagenum = e, this.getCatesList() }, showAddCateDialog: function () { this.getParentCatesList(), this.addCateDialogVisible = !0 }, getParentCatesList: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http.get('categories', { params: { type: 2 } }); case 2:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 6; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 6:e.parentCatesList = r.data; case 7:case 'end':return t.stop() } }, t) }))() }, parentKeysSelected: function () { this.selectedKeys.length > 0 ? (this.addCateForm.cat_pid = this.selectedKeys[this.selectedKeys.length - 1], this.addCateForm.cat_level = this.selectedKeys.length) : (this.addCateForm.cat_pid = 0, this.addCateForm.cat_level = 0) }, addCateDialogClose: function () { this.$refs.addCateFormRef.resetFields(), this.selectedKeys = [], this.addCateForm.cat_pid = 0, this.addCateForm.cat_level = 0 }, submitaddCate: function () { var e = this; this.$refs.addCateFormRef.validate(function () { var t = Object(s.a)(regeneratorRuntime.mark(function t (a) { var r, n; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (a) { t.next = 2; break } return t.abrupt('return', e.$message.warning('规则校验失败')); case 2:return t.next = 4, e.$http.post('categories', e.addCateForm); case 4:if (r = t.sent, n = r.data, n.meta.status === 201) { t.next = 8; break } return t.abrupt('return', e.$message.error(n.meta.msg)); case 8:e.$message.success(n.meta.msg), e.getCatesList(), e.addCateDialogVisible = !1; case 11:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) }, showEditCateInfoDialog: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$http.get('categories/' + e); case 2:if (r = a.sent, n = r.data, n.meta.status === 200) { a.next = 6; break } return a.abrupt('return', t.$message.error(n.meta.msg)); case 6:t.editCateInfoForm = n.data, t.editCateInfoDialogVisible = !0; case 8:case 'end':return a.stop() } }, a) }))() }, editCateInfoDialogClose: function () { this.$refs.editCateInfoFormRef.resetFields() }, submitEditCateInfo: function () { var e = this; this.$refs.editCateInfoFormRef.validate(function () { var t = Object(s.a)(regeneratorRuntime.mark(function t (a) { var r, n; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (a) { t.next = 2; break } return t.abrupt('return', e.$message.warning('规则校验失败')); case 2:return t.next = 4, e.$http.put('categories/'.concat(e.editCateInfoForm.cat_id), { cat_name: e.editCateInfoForm.cat_name }); case 4:if (r = t.sent, n = r.data, n.meta.status === 200) { t.next = 8; break } return t.abrupt('return', e.$message.error(n.meta.msg)); case 8:e.$message.success(n.meta.msg), e.editCateInfoDialogVisible = !1, e.getCatesList(); case 11:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) }, removeCateById: function (e) { var t = this; return Object(s.a)(regeneratorRuntime.mark(function a () { var r, n, s; return regeneratorRuntime.wrap(function (a) { while (1) switch (a.prev = a.next) { case 0:return a.next = 2, t.$confirm('此操作将永久删除该分类, 是否继续?', '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning' }).catch(function (e) { return e }); case 2:if (r = a.sent, r === 'confirm') { a.next = 5; break } return a.abrupt('return', t.$message.info('已取消删除！')); case 5:return a.next = 7, t.$http.delete('categories/' + e); case 7:if (n = a.sent, s = n.data, s.meta.status === 200) { a.next = 11; break } return a.abrupt('return', t.$message.error(s.meta.msg)); case 11:t.$message.success(s.meta.msg), t.getCatesList(); case 13:case 'end':return a.stop() } }, a) }))() } } }; var i = o; var l = (a('2ab5'), a('2877')); var c = Object(l.a)(i, r, n, !1, null, '341b5c98', null); t.default = c.exports }, '9df9': function (e, t, a) {}, '9f7f': function (e, t, a) { 'use strict'; var r = a('d039'); function n (e, t) { return RegExp(e, t) }t.UNSUPPORTED_Y = r(function () { var e = n('a', 'y'); return e.lastIndex = 2, e.exec('abcd') != null }), t.BROKEN_CARET = r(function () { var e = n('^r', 'gy'); return e.lastIndex = 2, e.exec('str') != null }) }, a434: function (e, t, a) { 'use strict'; var r = a('23e7'); var n = a('23cb'); var s = a('a691'); var o = a('50c4'); var i = a('7b0b'); var l = a('65f0'); var c = a('8418'); var u = a('1dde'); var d = a('ae40'); var m = u('splice'); var p = d('splice', { ACCESSORS: !0, 0: 0, 1: 2 }); var g = Math.max; var f = Math.min; var b = 9007199254740991; var h = 'Maximum allowed length exceeded'; r({ target: 'Array', proto: !0, forced: !m || !p }, { splice: function (e, t) { var a; var r; var u; var d; var m; var p; var v = i(this); var _ = o(v.length); var x = n(e, _); var y = arguments.length; if (y === 0 ? a = r = 0 : y === 1 ? (a = 0, r = _ - x) : (a = y - 2, r = f(g(s(t), 0), _ - x)), _ + a - r > b) throw TypeError(h); for (u = l(v, r), d = 0; d < r; d++)m = x + d, m in v && c(u, d, v[m]); if (u.length = r, a < r) { for (d = x; d < _ - r; d++)m = d + r, p = d + a, m in v ? v[p] = v[m] : delete v[p]; for (d = _; d > _ - r + a; d--) delete v[d - 1] } else if (a > r) for (d = _ - r; d > x; d--)m = d + r - 1, p = d + a - 1, m in v ? v[p] = v[m] : delete v[p]; for (d = 0; d < a; d++)v[d + x] = arguments[d + 2]; return v.length = _ - r + a, u } }) }, a870: function (e, t, a) { 'use strict'; a.r(t); var r = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('el-breadcrumb', { attrs: { separator: '/' } }, [a('el-breadcrumb-item', { attrs: { to: { path: '/home' } } }, [e._v('首页')]), a('el-breadcrumb-item', [e._v('商品管理')]), a('el-breadcrumb-item', [e._v('商品列表')]), a('el-breadcrumb-item', [e._v('添加商品')])], 1), a('el-card', [a('el-alert', { attrs: { title: '添加商品信息', closable: !1, 'show-icon': '', center: '', type: 'info' } }), a('el-steps', { attrs: { space: 200, active: e.activeIndex - 0, 'align-center': '', 'finish-status': 'success' } }, [a('el-step', { attrs: { title: '基本信息' } }), a('el-step', { attrs: { title: '商品参数' } }), a('el-step', { attrs: { title: '商品属性' } }), a('el-step', { attrs: { title: '商品图片' } }), a('el-step', { attrs: { title: '商品内容' } }), a('el-step', { attrs: { title: '提交', icon: 'iconfont icon-shangchuan' } })], 1), a('el-form', { ref: 'addGoodsFormRef', attrs: { model: e.addGoodsForm, rules: e.addGoodsFormRules, 'label-width': '100px', 'label-position': 'top' } }, [a('el-tabs', { attrs: { 'tab-position': 'left', 'before-leave': e.beforeTabLeave }, on: { 'tab-click': e.TabClicked }, model: { value: e.activeIndex, callback: function (t) { e.activeIndex = t }, expression: 'activeIndex' } }, [a('el-tab-pane', { attrs: { label: '基本信息', name: '0' } }, [a('el-form-item', { attrs: { label: '商品名称', prop: 'goods_name' } }, [a('el-input', { model: { value: e.addGoodsForm.goods_name, callback: function (t) { e.$set(e.addGoodsForm, 'goods_name', t) }, expression: 'addGoodsForm.goods_name' } })], 1), a('el-form-item', { attrs: { label: '商品价格', prop: 'goods_price' } }, [a('el-input', { attrs: { type: 'number' }, model: { value: e.addGoodsForm.goods_price, callback: function (t) { e.$set(e.addGoodsForm, 'goods_price', t) }, expression: 'addGoodsForm.goods_price' } })], 1), a('el-form-item', { attrs: { label: '商品重量', prop: 'goods_weight' } }, [a('el-input', { attrs: { type: 'number' }, model: { value: e.addGoodsForm.goods_weight, callback: function (t) { e.$set(e.addGoodsForm, 'goods_weight', t) }, expression: 'addGoodsForm.goods_weight' } })], 1), a('el-form-item', { attrs: { label: '商品数量', prop: 'goods_number' } }, [a('el-input', { attrs: { type: 'number' }, model: { value: e.addGoodsForm.goods_number, callback: function (t) { e.$set(e.addGoodsForm, 'goods_number', t) }, expression: 'addGoodsForm.goods_number' } })], 1), a('el-form-item', { attrs: { label: '商品分类', prop: 'goods_cat' } }, [a('el-cascader', { attrs: { clearable: '', options: e.catesList, props: e.catesProps }, on: { change: e.keysSelected }, model: { value: e.addGoodsForm.goods_cat, callback: function (t) { e.$set(e.addGoodsForm, 'goods_cat', t) }, expression: 'addGoodsForm.goods_cat' } })], 1)], 1), a('el-tab-pane', { attrs: { label: '商品参数', name: '1', prop: 'goods_cat' } }, e._l(e.manyTableData, function (t) { return a('el-form-item', { key: t.attr_id, attrs: { label: t.attr_name } }, [a('el-checkbox-group', { model: { value: t.attr_vals, callback: function (a) { e.$set(t, 'attr_vals', a) }, expression: 'item.attr_vals' } }, e._l(t.attr_vals, function (e, t) { return a('el-checkbox', { key: t, attrs: { label: e } }) }), 1)], 1) }), 1), a('el-tab-pane', { attrs: { label: '商品属性', name: '2' } }, e._l(e.onlyTableData, function (t) { return a('el-form-item', { key: t.attr_id, attrs: { label: t.attr_name } }, [a('el-input', { model: { value: t.attr_vals, callback: function (a) { e.$set(t, 'attr_vals', a) }, expression: 'item.attr_vals' } })], 1) }), 1), a('el-tab-pane', { attrs: { label: '商品图片', name: '3' } }, [a('el-tag', { staticClass: 'upImgTag', attrs: { closable: !1, center: '', type: 'warning' } }, [e._v('点 "+" 上传商品图片')]), a('el-upload', { attrs: { action: e.UploadImgUrl, headers: e.UpImgResHeaderOjb, 'list-type': 'picture-card', multiple: '', 'on-success': e.handleUpImgOk, 'on-preview': e.handlePictureCardPreview, 'on-remove': e.handleImgRemove } }, [a('i', { staticClass: 'el-icon-plus' })]), a('el-dialog', { staticClass: 'previewImg', attrs: { title: '图片预览', visible: e.uploadImgDialogVisible }, on: { 'update:visible': function (t) { e.uploadImgDialogVisible = t } } }, [a('img', { attrs: { width: '100%', src: e.uploadImgDialogImgUrl, alt: '' } })])], 1), a('el-tab-pane', { attrs: { label: '商品内容', name: '4' } }, [a('quill-editor', { model: { value: e.addGoodsForm.goods_introduce, callback: function (t) { e.$set(e.addGoodsForm, 'goods_introduce', t) }, expression: 'addGoodsForm.goods_introduce' } }), a('el-button', { staticClass: 'btnAddGoods', attrs: { type: 'primary' }, on: { click: e.submitAddGoods } }, [e._v('添加商品')])], 1)], 1)], 1)], 1)], 1) }; var n = []; var s = (a('c740'), a('4160'), a('a15b'), a('a434'), a('ac1f'), a('1276'), a('159b'), a('96cf'), a('1da1')); var o = a('60bb'); var i = a.n(o); var l = { data: function () { return { activeIndex: '0', addGoodsForm: { goods_name: '', goods_price: 100, goods_weight: 100, goods_number: 100, goods_cat: [], pics: [], goods_introduce: '', attrs: [] }, addGoodsFormRules: { goods_name: [{ required: !0, message: '请输入商品名！', trigger: 'blur' }, { min: 2, max: 60, message: '长度在 2 到 60 个字符', trigger: 'blur' }], goods_price: [{ required: !0, message: '请输入商品价格！', trigger: 'blur' }], goods_weight: [{ required: !0, message: '请输入商品重量！', trigger: 'blur' }], goods_cat: [{ required: !0, message: '请选择商品分类！', trigger: 'blur' }] }, catesList: [], catesProps: { expandTrigger: 'hover', value: 'cat_id', label: 'cat_name', children: 'children' }, manyTableData: [], onlyTableData: [], uploadImgDialogImgUrl: '', uploadImgDialogVisible: !1, UploadImgUrl: 'http://127.0.0.1:8888/api/private/v1/upload', UpImgResHeaderOjb: { Authorization: window.sessionStorage.getItem('token') } } }, created: function () { this.getCatesList() }, methods: { getCatesList: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http.get('categories'); case 2:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 6; break } return t.abrupt('return', e.$message.error(r.meta.msg)); case 6:e.catesList = r.data; case 7:case 'end':return t.stop() } }, t) }))() }, keysSelected: function () { this.addGoodsForm.goods_cat.length !== 3 && (this.addGoodsForm.goods_cat.length === 2 && this.$message.warning('只允许选中第三级分类'), this.addGoodsForm.goods_cat = []) }, beforeTabLeave: function (e, t) { if (t === '0' && this.addGoodsForm.goods_cat.length !== 3) return this.$message.warning('请先选中第三级商品分类！'), !1 }, TabClicked: function () { var e = this; return Object(s.a)(regeneratorRuntime.mark(function t () { var a, r, n, s; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (e.activeIndex !== '1') { t.next = 9; break } return t.next = 3, e.$http.get('categories/'.concat(e.cateId, '/attributes'), { params: { sel: 'many' } }); case 3:if (a = t.sent, r = a.data, r.meta.status === 200) { t.next = 7; break } return t.abrupt('return', e.$message.error('获取数据失败')); case 7:r.data.forEach(function (e) { e.attr_vals = e.attr_vals ? e.attr_vals.split(' ') : [] }), e.manyTableData = r.data; case 9:if (e.activeIndex !== '2') { t.next = 17; break } return t.next = 12, e.$http.get('categories/'.concat(e.cateId, '/attributes'), { params: { sel: 'only' } }); case 12:if (n = t.sent, s = n.data, s.meta.status === 200) { t.next = 16; break } return t.abrupt('return', e.$message.error('获取数据失败')); case 16:e.onlyTableData = s.data; case 17:case 'end':return t.stop() } }, t) }))() }, handleImgRemove: function (e, t) { var a = e.response.data.tmp_path; var r = this.addGoodsForm.pics.findIndex(function (e) { return e.pic === a }); this.addGoodsForm.pics.splice(r, 1) }, handlePictureCardPreview: function (e) { this.uploadImgDialogImgUrl = e.url, this.uploadImgDialogVisible = !0 }, handleUpImgOk: function (e, t, a) { var r = { pic: e.data.tmp_path }; this.addGoodsForm.pics.push(r) }, submitAddGoods: function () { var e = this; this.$refs.addGoodsFormRef.validate(function () { var t = Object(s.a)(regeneratorRuntime.mark(function t (a) { var r, n, s; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (a) { t.next = 2; break } return t.abrupt('return', e.$message.warning('请正确填写商品信息')); case 2:return r = i.a.cloneDeep(e.addGoodsForm), r.goods_cat = r.goods_cat.join(','), e.manyTableData.forEach(function (t) { var a = { attr_id: t.attr_id, attr_value: t.attr_vals.join(' ') }; e.addGoodsForm.attrs.push(a) }), e.onlyTableData.forEach(function (t) { var a = { attr_id: t.attr_id, attr_value: t.attr_vals }; e.addGoodsForm.attrs.push(a) }), r.attrs = e.addGoodsForm.attrs, t.next = 9, e.$http.post('goods', r); case 9:if (n = t.sent, s = n.data, s.meta.status === 201) { t.next = 14; break } return e.addGoodsForm.attrs = [], t.abrupt('return', e.$message.error(s.meta.msg)); case 14:e.$message.success(s.meta.msg), e.$router.push('/goods'); case 16:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) } }, computed: { cateId: function () { return this.addGoodsForm.goods_cat.length === 3 ? this.addGoodsForm.goods_cat[2] : null } } }; var c = l; var u = (a('1296'), a('2877')); var d = Object(u.a)(c, r, n, !1, null, '4bb86a66', null); t.default = d.exports }, ac1f: function (e, t, a) { 'use strict'; var r = a('23e7'); var n = a('9263'); r({ target: 'RegExp', proto: !0, forced: /./.exec !== n }, { exec: n }) }, c740: function (e, t, a) { 'use strict'; var r = a('23e7'); var n = a('b727').findIndex; var s = a('44d2'); var o = a('ae40'); var i = 'findIndex'; var l = !0; var c = o(i); i in [] && Array(1)[i](function () { l = !1 }), r({ target: 'Array', proto: !0, forced: l || !c }, { findIndex: function (e) { return n(this, e, arguments.length > 1 ? arguments[1] : void 0) } }), s(i) }, c8d2: function (e, t, a) { var r = a('d039'); var n = a('5899'); var s = '​᠎'; e.exports = function (e) { return r(function () { return !!n[e]() || s[e]() != s || n[e].name !== e }) } }, d784: function (e, t, a) { 'use strict'; a('ac1f'); var r = a('6eeb'); var n = a('d039'); var s = a('b622'); var o = a('9263'); var i = a('9112'); var l = s('species'); var c = !n(function () { var e = /./; return e.exec = function () { var e = []; return e.groups = { a: '7' }, e }, ''.replace(e, '$<a>') !== '7' }); var u = (function () { return 'a'.replace(/./, '$0') === '$0' }()); var d = s('replace'); var m = (function () { return !!/./[d] && /./[d]('a', '$0') === '' }()); var p = !n(function () { var e = /(?:)/; var t = e.exec; e.exec = function () { return t.apply(this, arguments) }; var a = 'ab'.split(e); return a.length !== 2 || a[0] !== 'a' || a[1] !== 'b' }); e.exports = function (e, t, a, d) { var g = s(e); var f = !n(function () { var t = {}; return t[g] = function () { return 7 }, ''[e](t) != 7 }); var b = f && !n(function () { var t = !1; var a = /a/; return e === 'split' && (a = {}, a.constructor = {}, a.constructor[l] = function () { return a }, a.flags = '', a[g] = /./[g]), a.exec = function () { return t = !0, null }, a[g](''), !t }); if (!f || !b || e === 'replace' && (!c || !u || m) || e === 'split' && !p) { var h = /./[g]; var v = a(g, ''[e], function (e, t, a, r, n) { return t.exec === o ? f && !n ? { done: !0, value: h.call(t, a, r) } : { done: !0, value: e.call(a, t, r) } : { done: !1 } }, { REPLACE_KEEPS_$0: u, REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: m }); var _ = v[0]; var x = v[1]; r(String.prototype, e, _), r(RegExp.prototype, g, t == 2 ? function (e, t) { return x.call(e, this, t) } : function (e) { return x.call(e, this) }) }d && i(RegExp.prototype[g], 'sham', !0) } } }])
// # sourceMappingURL=goods.e03d2337.js.map
